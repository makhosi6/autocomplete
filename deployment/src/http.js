'use strict';function a14_0x540a(){const _0x44c685=['listen','body','toFixed','status','\x1b[46m%s\x1b[0m','set','getAll','analytics','RedisHttpController','getTtl','quit','connections','next','split','/secret/*','PROCESS\x20DISCONNECTED...','/docs/get-started','/api/v1/autocomplete/:key','/secret/feed-data/:category','createAnIndex','isAuth','value','start','defineProperty','33UcgOoH','rateLimitArgs','remaining','once','static','use','redirect','get','440212WUefOr','send','cors','sendStatus','compression','/secret/whitelist','retry','/api/v2/search/autocomplete/:key','apply','3329280QBasmA','\x1b[41m%s\x1b[0m','process','\x1b[31m%s\x1b[0m','./core/cache/external','json','\x20VS\x20','trust\x20proxy','post','client','807080ElUStY','all','disconnect','./core/utils/helpers','x-ratelimit-limit','Running\x20on\x20port\x203001','./core/queue/index','connection','PROCESS\x20STOPPED...','TTL','448KAItrM','All\x20done:','/secret/boot','__esModule','throw','\x1b[36m%s\x1b[0m','./core/utils/app.config','x-ratelimit-remaining','map','890rnsHfR','limit','feedData','./core/controllers/http','3JgqRCS','/static','push','/api/*','done','express','4038GKwMZx','key','enable','ttl','retry-after','statusCode','rateLimitRedis','address','\x1b[43m%s\x1b[0m','./core/cache/internal','assign','857QkYJrV','headers','3245930Mwswxb','results','Connections\x20\x20=>\x20','catch','2685136ZgLodJ','then','log','USED\x20TOKEN\x20IS','error','/home'];a14_0x540a=function(){return _0x44c685;};return a14_0x540a();}const a14_0x3e13f1=a14_0x2f34;(function(_0x4e0220,_0x268de9){const _0x4422e9=a14_0x2f34,_0x1b783b=_0x4e0220();while(!![]){try{const _0x37c4b8=-parseInt(_0x4422e9(0x20d))/0x1*(parseInt(_0x4422e9(0x1f8))/0x2)+parseInt(_0x4422e9(0x1fc))/0x3*(parseInt(_0x4422e9(0x1d2))/0x4)+parseInt(_0x4422e9(0x1e5))/0x5+-parseInt(_0x4422e9(0x202))/0x6*(-parseInt(_0x4422e9(0x1ef))/0x7)+-parseInt(_0x4422e9(0x213))/0x8+-parseInt(_0x4422e9(0x1db))/0x9+-parseInt(_0x4422e9(0x20f))/0xa*(-parseInt(_0x4422e9(0x1ca))/0xb);if(_0x37c4b8===_0x268de9)break;else _0x1b783b['push'](_0x1b783b['shift']());}catch(_0x3aa120){_0x1b783b['push'](_0x1b783b['shift']());}}}(a14_0x540a,0x312b1));var __awaiter=this&&this['__awaiter']||function(_0x5d36e2,_0x1b1938,_0x3a9bee,_0x1abeec){function _0x61ff90(_0x12e09f){return _0x12e09f instanceof _0x3a9bee?_0x12e09f:new _0x3a9bee(function(_0x1841df){_0x1841df(_0x12e09f);});}return new(_0x3a9bee||(_0x3a9bee=Promise))(function(_0x6447cf,_0x38d431){const _0x4e2071=a14_0x2f34;function _0x519941(_0x8101ef){try{_0x294d75(_0x1abeec['next'](_0x8101ef));}catch(_0x12441f){_0x38d431(_0x12441f);}}function _0x4ae04d(_0x159b52){const _0x10cc24=a14_0x2f34;try{_0x294d75(_0x1abeec[_0x10cc24(0x1f3)](_0x159b52));}catch(_0x33f049){_0x38d431(_0x33f049);}}function _0x294d75(_0x3fb0ea){const _0x112990=a14_0x2f34;_0x3fb0ea[_0x112990(0x200)]?_0x6447cf(_0x3fb0ea[_0x112990(0x1c7)]):_0x61ff90(_0x3fb0ea['value'])[_0x112990(0x214)](_0x519941,_0x4ae04d);}_0x294d75((_0x1abeec=_0x1abeec[_0x4e2071(0x1da)](_0x5d36e2,_0x1b1938||[]))[_0x4e2071(0x1be)]());});};Object[a14_0x3e13f1(0x1c9)](exports,a14_0x3e13f1(0x1f2),{'value':!![]});const http_1=require(a14_0x3e13f1(0x1fb)),client_1=require('./core/db/client'),app_config_1=require(a14_0x3e13f1(0x1f5)),helpers_1=require(a14_0x3e13f1(0x1e8)),rate_limiting_config_1=require('./core/utils/rate-limiting.config'),{rateLimitRedis}=require('@jwerre/rate-limit-redis'),express=require(a14_0x3e13f1(0x201)),cors=require(a14_0x3e13f1(0x1d4)),queue=require(a14_0x3e13f1(0x1eb)),cache=require(a14_0x3e13f1(0x1df)),internal_cache=require(a14_0x3e13f1(0x20b)),compression=require(a14_0x3e13f1(0x1d6));(0x0,client_1[a14_0x3e13f1(0x1e4)])()['then'](_0x555c8c=>global[a14_0x3e13f1(0x1e4)]=_0x555c8c),(0x0,helpers_1['getWhiteList'])()[a14_0x3e13f1(0x214)](_0xb1a00e=>_0xb1a00e[a14_0x3e13f1(0x1f7)](_0x11c5fb=>internal_cache[a14_0x3e13f1(0x21e)](_0x11c5fb['key'],_0x11c5fb))),queue[a14_0x3e13f1(0x1c8)](_0x403730=>{const _0x1c6a29=a14_0x3e13f1;if(_0x403730)throw _0x403730;console[_0x1c6a29(0x215)](_0x1c6a29(0x1f4),_0x1c6a29(0x1f0),queue[_0x1c6a29(0x210)]);});function a14_0x2f34(_0x1488cc,_0x59cde1){const _0x540ad1=a14_0x540a();return a14_0x2f34=function(_0x2f3448,_0x480f5b){_0x2f3448=_0x2f3448-0x1be;let _0x3ba7a6=_0x540ad1[_0x2f3448];return _0x3ba7a6;},a14_0x2f34(_0x1488cc,_0x59cde1);}const app=express();app[a14_0x3e13f1(0x1cf)](cors()),app[a14_0x3e13f1(0x1cf)](express[a14_0x3e13f1(0x1e0)]()),app[a14_0x3e13f1(0x204)](a14_0x3e13f1(0x1e2)),rateLimitRedis(rate_limiting_config_1[a14_0x3e13f1(0x1cb)]),app['use']((_0x3a4125,_0x5016e5,_0x4e591c)=>{const _0x4f3322=a14_0x3e13f1;queue[_0x4f3322(0x1fe)](()=>(0x0,helpers_1[_0x4f3322(0x220)])(_0x3a4125)),_0x4e591c();}),app[a14_0x3e13f1(0x1e6)]('/api/*',(_0x46bc4f,_0x5dba9c,_0x1c1dd7)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x43691c=a14_0x3e13f1,_0xf1acf0=_0x46bc4f[_0x43691c(0x20e)]['authorization'];if(!_0xf1acf0)return _0x5dba9c[_0x43691c(0x1d5)](0x190);else{const _0x3aa73d=_0xf1acf0[_0x43691c(0x1bf)]('\x20')[0x1];console['log']({'bearerToken':_0x3aa73d});if(!_0x3aa73d)return _0x5dba9c[_0x43691c(0x1d5)](0x190);if(yield(0x0,helpers_1[_0x43691c(0x1c6)])(_0x3aa73d))_0x1c1dd7();else _0x5dba9c['sendStatus'](0x191);}})),app[a14_0x3e13f1(0x1e6)](a14_0x3e13f1(0x1ff),(_0x5f3a2d,_0xcf6a8e,_0x46b7fd)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x36a31c=a14_0x3e13f1;queue[_0x36a31c(0x1fe)](()=>{const _0xbfe26b=_0x36a31c;global[_0xbfe26b(0x208)][_0xbfe26b(0x1dd)](_0x5f3a2d)[_0xbfe26b(0x214)]((_0x10ddd7={})=>{const _0x30032b=_0xbfe26b;console['log']({'result':_0x10ddd7}),cache[_0x30032b(0x21e)](_0x10ddd7['ip'],_0x10ddd7,_0x10ddd7[_0x30032b(0x1d8)]||app_config_1[_0x30032b(0x1ee)]);})[_0xbfe26b(0x212)](console[_0xbfe26b(0x215)]);}),console[_0x36a31c(0x215)](global[_0x36a31c(0x208)]);const _0x57f806=Object[_0x36a31c(0x20c)]({'ttl':((cache[_0x36a31c(0x222)](_0x5f3a2d['ip'])-new Date()['getTime']())/0x3e8)[_0x36a31c(0x21b)]()},cache['get'](_0x5f3a2d['ip']));_0xcf6a8e[_0x36a31c(0x21e)](_0x36a31c(0x1e9),_0x57f806[_0x36a31c(0x1f9)]||rate_limiting_config_1[_0x36a31c(0x1cb)][_0x36a31c(0x1f9)]),_0xcf6a8e[_0x36a31c(0x21e)](_0x36a31c(0x1f6),_0x57f806[_0x36a31c(0x1cc)]==0x0?_0x57f806[_0x36a31c(0x1cc)]:String(_0x57f806[_0x36a31c(0x1cc)]-0x1||rate_limiting_config_1[_0x36a31c(0x1cb)][_0x36a31c(0x1f9)]-0x1)),_0xcf6a8e[_0x36a31c(0x21e)](_0x36a31c(0x206),_0x57f806['retry']?_0x57f806[_0x36a31c(0x205)]:0x0),console[_0x36a31c(0x215)]({'usageData':_0x57f806});if((_0x57f806===null||_0x57f806===void 0x0?void 0x0:_0x57f806['ip'])!==(0x0,helpers_1['userIP'])(_0x5f3a2d)&&_0x57f806['ip'])console[_0x36a31c(0x215)](_0x36a31c(0x20a),_0x57f806['ip']+_0x36a31c(0x1e1)+(0x0,helpers_1['userIP'])(_0x5f3a2d));(_0x57f806===null||_0x57f806===void 0x0?void 0x0:_0x57f806[_0x36a31c(0x21c)])===0x1ad?_0xcf6a8e[_0x36a31c(0x1d3)](_0x57f806['status']):_0x46b7fd();})),app['use'](compression()),app[a14_0x3e13f1(0x1cf)](express[a14_0x3e13f1(0x1ce)](__dirname+a14_0x3e13f1(0x1fd))),app[a14_0x3e13f1(0x1e6)](a14_0x3e13f1(0x1c0),(_0x167a4f,_0x2ad567,_0x5f5331)=>{const _0x274534=a14_0x3e13f1,_0x3a6232=_0x167a4f[_0x274534(0x20e)]['authorization'];console[_0x274534(0x215)](_0x274534(0x1dc),'All\x20Admin\x20routes\x20...',_0x274534(0x216)+_0x3a6232);if(!_0x3a6232)_0x2ad567[_0x274534(0x1d5)](0x193);else{const _0x504038=_0x3a6232['split']('\x20')[0x1];console[_0x274534(0x215)]({'bearerToken':_0x504038}),_0x504038!==app_config_1['ADMIN_KEY']?_0x2ad567[_0x274534(0x1d5)](0x193):_0x5f5331();}}),app[a14_0x3e13f1(0x1d1)]('/',(_0x65aaf6,_0x313711)=>{const _0x567db5=a14_0x3e13f1;_0x313711[_0x567db5(0x1d0)](_0x567db5(0x1c2));}),app[a14_0x3e13f1(0x1d1)](a14_0x3e13f1(0x218),(_0x3234c8,_0x536b04)=>{const _0x4ad908=a14_0x3e13f1;_0x536b04[_0x4ad908(0x1d0)]('/docs/get-started');}),app[a14_0x3e13f1(0x1d1)](a14_0x3e13f1(0x1f1),http_1[a14_0x3e13f1(0x221)][a14_0x3e13f1(0x1c5)]),app[a14_0x3e13f1(0x1e3)](a14_0x3e13f1(0x1d7),(_0x2933cd,_0x4e0874)=>{const _0x299e22=a14_0x3e13f1;try{console[_0x299e22(0x215)]('Whitelist\x20Updated');const _0x3799bc=_0x2933cd[_0x299e22(0x21a)];internal_cache['set'](_0x3799bc[_0x299e22(0x203)],_0x3799bc),_0x4e0874[_0x299e22(0x1d3)](0xc9);}catch(_0xd8f02d){_0x4e0874[_0x299e22(0x1d3)](0x1f4);}}),app[a14_0x3e13f1(0x1d1)](a14_0x3e13f1(0x1c4),http_1[a14_0x3e13f1(0x221)][a14_0x3e13f1(0x1fa)]),app[a14_0x3e13f1(0x1d1)](a14_0x3e13f1(0x1c3),(_0x137582,_0x3c8af3)=>_0x3c8af3[a14_0x3e13f1(0x207)]!==0x1ad?http_1[a14_0x3e13f1(0x221)][a14_0x3e13f1(0x21f)](_0x137582,_0x3c8af3):_0x3c8af3[a14_0x3e13f1(0x1d3)](_0x3c8af3[a14_0x3e13f1(0x207)])),app[a14_0x3e13f1(0x1d1)](a14_0x3e13f1(0x1d9),http_1[a14_0x3e13f1(0x221)][a14_0x3e13f1(0x21f)]),process['once']('exit',()=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5d990d=a14_0x3e13f1;console[_0x5d990d(0x215)](_0x5d990d(0x1de),_0x5d990d(0x1ed)),global[_0x5d990d(0x1e4)]['quit'](),global['rateLimitRedis']['disconnect']();})),process[a14_0x3e13f1(0x1cd)](a14_0x3e13f1(0x1e7),()=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1036e8=a14_0x3e13f1;console[_0x1036e8(0x215)](_0x1036e8(0x1de),_0x1036e8(0x1c1)),global[_0x1036e8(0x1e4)][_0x1036e8(0x223)](),global[_0x1036e8(0x208)][_0x1036e8(0x1e7)]();}));const server=app[a14_0x3e13f1(0x219)](app_config_1['PORT'],()=>console[a14_0x3e13f1(0x215)](a14_0x3e13f1(0x21d),a14_0x3e13f1(0x1ea)));console[a14_0x3e13f1(0x215)]({'maxConnections':server['maxConnections'],'getMaxListeners':server['getMaxListeners'](),'address':server[a14_0x3e13f1(0x209)]()}),server['on'](a14_0x3e13f1(0x1ec),_0x4fbc01=>{const _0x49b04d=a14_0x3e13f1;console[_0x49b04d(0x215)](_0x49b04d(0x211),server[_0x49b04d(0x224)],'\x20',_0x4fbc01['remoteAddress'],'',_0x4fbc01['localAddress']);}),server['on'](a14_0x3e13f1(0x217),()=>{const _0x44f078=a14_0x3e13f1;global[_0x44f078(0x1e4)][_0x44f078(0x223)](),global[_0x44f078(0x208)][_0x44f078(0x1e7)]();});